<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - TASKManager</title>
  <link rel="stylesheet" href="../css/login.css" />
</head>
<body>
  <div class="container">
    <form id="loginForm" class="login-box">
      <h1 class="title">Login</h1>

      <label for="username" class="label">Nome do usuario</label>
      <input type="text" id="username" placeholder="Please insert your username" />

      <label for="password" class="label">Password</label>
      <input type="password" id="password" placeholder="Please insert your password" />

      <button type="submit" class="signin-btn">Sign in</button>

      <p>NÃ£o tem uma conta? <span onclick="redirecionarParaCadastro()">Criar conta</span></p>
    </form>
  </div>
</body>
</body>
<script src="../js/main.js"></script>
<script type="module" src="../js/pages/login.js"></script>
<script>
  function redirecionarParaCadastro() { window.location.href = './cadastro.html'; }

  document.getElementById('loginForm').addEventListener('submit', function(event){
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    apiMock.login(username, password).then(res => {
      if (res && res.token) {
        sessionStorage.setItem('authToken', res.token);
        window.location.href = 'profile.html';
      } else {
        alert('Login failed. Please check your credentials and try again.');
      }
    });
  });
</script>
</html>